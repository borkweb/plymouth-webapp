psu.cdn={files_cb:function(){},files_submit:function(){var a=$(this),b=a.serialize();$.post(a.attr("action"),b,psu.cdn.files_cb);return false},init:function(){$("#manage-files input:checkbox").shiftSelect()},path_submit:function(){var a=$(this),b=a.find("[name=p]").val();a=a.attr("action");if("/"!=b.substr(0,1))b="/"+b;document.location.href=a+b;return false},select:function(){var a=$(this).attr("id");$("#manage-files input:checkbox").removeAttr("checked").change();if(a=="sel-all")$("#manage-files input:checkbox").attr("checked",
"checked").change();else if(a=="sel-db")$("#manage-files tr.cdn-db input:checkbox").attr("checked","checked").change();else if(a=="sel-nodb")$("#manage-files tr:not(.cdn-db) input:checkbox").attr("checked","checked").change();else a=="sel-nofs"&&$("#manage-files tr:not(.cdn-fs) input:checkbox").attr("checked","checked").change();return false},select_row_click:function(a){if(a.target.tagName=="INPUT")return true;a=$(this).closest("tr").find(":checkbox");a.is(":checked")?a.removeAttr("checked").change():
a.attr("checked","checked").change()},select_row_checkbox_clicked:function(){},select_row_checkbox_changed:function(){psu.cdn.row_highlight($(this))},row_highlight:function(a){$tr=a.closest("tr");a.is(":checked")?$tr.addClass("highlight"):$tr.removeClass("highlight")}};
jQuery.fn.shiftSelect=function(){var a=this,b;jQuery(this).click(function(c){if(b)if(c.shiftKey){c=a.index(this);var d=a.index(b),e=b.checked;if(c==d)return true;var f=Math.max(c,d);for(i=Math.min(c,d);i<=f;i++){a[i].checked=e;$(a[i]).change()}}b=this})};$(psu.cdn.init);$("#manage-files tbody tr").live("click",psu.cdn.select_row_click);$("#manage-files tbody tr :checkbox").live("click",psu.cdn.select_row_checkbox_clicked);$("#manage-files tbody tr :checkbox").live("change",psu.cdn.select_row_checkbox_changed);
$("#view-path").live("submit",psu.cdn.path_submit);$("#cdn-actions a").live("click",psu.cdn.select);
